# Sider2API ç®€å•éƒ¨ç½²æŒ‡å—

**æ–‡ä»¶ç‰ˆæœ¬**: deno_pro.ts
**æ›´æ–°æ—¥æœŸ**: 2025-12-04
**é€‚ç”¨å¯¹è±¡**: å¸Œæœ›å¿«é€Ÿéƒ¨ç½² Sider2API æœåŠ¡çš„ç”¨æˆ·

---

## ðŸ“‹ ç›®å½•

1. [æœ¬åœ°éƒ¨ç½² (æŽ¨èå…¥é—¨)](#1-æœ¬åœ°éƒ¨ç½²-æŽ¨èå…¥é—¨)
2. [Deno Deploy éƒ¨ç½² (æŽ¨èç”Ÿäº§)](#2-deno-deploy-éƒ¨ç½²-æŽ¨èç”Ÿäº§)
3. [VPS éƒ¨ç½² (æŽ¨èè‡ªå»º)](#3-vps-éƒ¨ç½²-æŽ¨èè‡ªå»º)
4. [Docker éƒ¨ç½² (æŽ¨èå®¹å™¨åŒ–)](#4-docker-éƒ¨ç½²-æŽ¨èå®¹å™¨åŒ–)
5. [å¸¸è§é—®é¢˜](#5-å¸¸è§é—®é¢˜)

---

## 1. æœ¬åœ°éƒ¨ç½² (æŽ¨èå…¥é—¨)

### é€‚ç”¨åœºæ™¯
- å¼€å‘å’Œæµ‹è¯•
- ä¸ªäººæœ¬åœ°ä½¿ç”¨
- å¿«é€Ÿä½“éªŒåŠŸèƒ½

### éƒ¨ç½²æ­¥éª¤

#### æ­¥éª¤ 1: å®‰è£… Deno

**Windows (PowerShell)**:
```powershell
irm https://deno.land/install.ps1 | iex
```

**macOS / Linux**:
```bash
curl -fsSL https://deno.land/install.sh | sh
```

#### æ­¥éª¤ 2: èŽ·å– Sider Token

1. å®‰è£… [Sider Chrome æ‰©å±•](https://sider.ai/)
2. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
3. å¯¼èˆªåˆ°:**åº”ç”¨ç¨‹åº** â†’ **å­˜å‚¨** â†’ **æ‰©å±•å­˜å‚¨** â†’ **Sider:ChatGPTä¾§è¾¹æ **
4. å¤åˆ¶ `token` å­—æ®µçš„å€¼

#### æ­¥éª¤ 3: ä¸‹è½½é¡¹ç›®

```bash
git clone https://github.com/goldenhawksu/sider2api.git
cd sider2api
```

#### æ­¥éª¤ 4: é…ç½®çŽ¯å¢ƒå˜é‡

**Windows (CMD)**:
```cmd
set SIDER_AUTH_TOKEN=ä½ çš„_Sider_Token
set AUTH_TOKEN=ä½ çš„_ç®¡ç†å¯†ç 
```

**Windows (PowerShell)**:
```powershell
$env:SIDER_AUTH_TOKEN="ä½ çš„_Sider_Token"
$env:AUTH_TOKEN="ä½ çš„_ç®¡ç†å¯†ç "
```

**macOS / Linux**:
```bash
export SIDER_AUTH_TOKEN="ä½ çš„_Sider_Token"
export AUTH_TOKEN="ä½ çš„_ç®¡ç†å¯†ç "
```

#### æ­¥éª¤ 5: å¯åŠ¨æœåŠ¡

```bash
deno run --allow-net --allow-env --allow-read --allow-write deno_pro.ts
```

**æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬ (Windows)**:
```cmd
start_with_auth.bat
```

#### æ­¥éª¤ 6: éªŒè¯æœåŠ¡

æ‰“å¼€æµè§ˆå™¨è®¿é—®:
- **API ç«¯ç‚¹**: http://localhost:8000
- **ç®¡ç†ç•Œé¢**: http://localhost:8000/admin
- **æ¨¡åž‹åˆ—è¡¨**: http://localhost:8000/v1/models

**æµ‹è¯•å¯¹è¯**:
```bash
curl http://localhost:8000/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{
    "model": "claude-4.5-sonnet",
    "messages": [{"role": "user", "content": "ä½ å¥½"}],
    "stream": false
  }'
```

---

## 2. Deno Deploy éƒ¨ç½² (æŽ¨èç”Ÿäº§)

### é€‚ç”¨åœºæ™¯
- ç”Ÿäº§çŽ¯å¢ƒ
- å…¨çƒè¾¹ç¼˜ç½‘ç»œåŠ é€Ÿ
- æ— éœ€æœåŠ¡å™¨ç»´æŠ¤
- è‡ªåŠ¨æ‰©å®¹

### éƒ¨ç½²æ­¥éª¤

#### æ–¹å¼ä¸€:GitHub è‡ªåŠ¨éƒ¨ç½² (æŽ¨è)

**æ­¥éª¤ 1**: Fork é¡¹ç›®åˆ°ä½ çš„ GitHub

è®¿é—®: https://github.com/goldenhawksu/sider2api
ç‚¹å‡»å³ä¸Šè§’ **Fork** æŒ‰é’®

**æ­¥éª¤ 2**: åˆ›å»º Deno Deploy é¡¹ç›®

1. è®¿é—® https://dash.deno.com/projects
2. ç‚¹å‡» **"New Project"**
3. é€‰æ‹© **"Deploy from GitHub"**
4. æŽˆæƒ Deno Deploy è®¿é—®ä½ çš„ GitHub
5. é€‰æ‹© fork çš„ä»“åº“ `sider2api`
6. é…ç½®éƒ¨ç½²:
   - **Entry Point**: `deno_pro.ts`
   - **Branch**: `main`

**æ­¥éª¤ 3**: é…ç½®çŽ¯å¢ƒå˜é‡

åœ¨ Deno Deploy é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ :

| å˜é‡å | å€¼ | è¯´æ˜Ž |
|--------|-----|------|
| `SIDER_AUTH_TOKEN` | ä½ çš„_Sider_Token | **å¿…éœ€** |
| `AUTH_TOKEN` | ä½ çš„_ç®¡ç†å¯†ç  | å¯é€‰,æŽ¨èé…ç½® |

**æ­¥éª¤ 4**: éƒ¨ç½²å®Œæˆ

Deno Deploy ä¼šè‡ªåŠ¨éƒ¨ç½²,å‡ ç§’é’ŸåŽè®¿é—®åˆ†é…çš„åŸŸå:
```
https://your-project-name.deno.dev
```

#### æ–¹å¼äºŒ:Playground å¿«é€Ÿéƒ¨ç½²

**æ­¥éª¤ 1**: æ‰“å¼€ Playground

è®¿é—®: https://dash.deno.com/playground

**æ­¥éª¤ 2**: ç²˜è´´ä»£ç 

1. å¤åˆ¶ [deno_pro.ts](../deno_pro.ts) çš„å…¨éƒ¨å†…å®¹
2. ç²˜è´´åˆ° Playground ç¼–è¾‘å™¨

**æ­¥éª¤ 3**: é…ç½®çŽ¯å¢ƒå˜é‡

ç‚¹å‡»ç¼–è¾‘å™¨å·¦ä¸‹è§’ **"Environment Variables"**,æ·»åŠ :
```
SIDER_AUTH_TOKEN=ä½ çš„_Sider_Token
AUTH_TOKEN=ä½ çš„_ç®¡ç†å¯†ç 
```

**æ­¥éª¤ 4**: ä¿å­˜å¹¶éƒ¨ç½²

ç‚¹å‡»å³ä¸Šè§’ **"Save & Deploy"**,ç­‰å¾…éƒ¨ç½²å®Œæˆã€‚

---

## 3. VPS éƒ¨ç½² (æŽ¨èè‡ªå»º)

### é€‚ç”¨åœºæ™¯
- è‡ªæœ‰æœåŠ¡å™¨
- éœ€è¦å®Œå…¨æŽ§åˆ¶
- å†…ç½‘éƒ¨ç½²
- é•¿æœŸè¿è¡Œ

### éƒ¨ç½²æ­¥éª¤

#### å¿«é€Ÿéƒ¨ç½²è„šæœ¬ (Linux)

åˆ›å»ºæ–‡ä»¶ `deploy_sider2api.sh`:

```bash
#!/bin/bash

# 1. å®‰è£… Deno
echo "ðŸ“¦ å®‰è£… Deno..."
curl -fsSL https://deno.land/install.sh | sh
export PATH="$HOME/.deno/bin:$PATH"
echo 'export PATH="$HOME/.deno/bin:$PATH"' >> ~/.bashrc

# 2. åˆ›å»ºæœåŠ¡ç›®å½•
echo "ðŸ“ åˆ›å»ºæœåŠ¡ç›®å½•..."
sudo mkdir -p /opt/sider2api
cd /opt/sider2api

# 3. ä¸‹è½½é¡¹ç›®
echo "â¬‡ï¸ ä¸‹è½½é¡¹ç›®..."
sudo git clone https://github.com/goldenhawksu/sider2api.git .

# 4. é…ç½®çŽ¯å¢ƒå˜é‡ (äº¤äº’å¼è¾“å…¥)
echo ""
echo "ðŸ”‘ è¯·è¾“å…¥ Sider Token:"
read -r SIDER_TOKEN
echo ""
echo "ðŸ” è¯·è¾“å…¥ç®¡ç†å¯†ç  (å¯é€‰,ç›´æŽ¥å›žè½¦è·³è¿‡):"
read -r AUTH_TOKEN

# 5. åˆ›å»º systemd æœåŠ¡
echo "âš™ï¸ åˆ›å»º systemd æœåŠ¡..."
sudo tee /etc/systemd/system/sider2api.service > /dev/null <<EOF
[Unit]
Description=Sider2API Service
After=network.target

[Service]
Type=simple
User=$USER
WorkingDirectory=/opt/sider2api
Environment=SIDER_AUTH_TOKEN=$SIDER_TOKEN
$([ -n "$AUTH_TOKEN" ] && echo "Environment=AUTH_TOKEN=$AUTH_TOKEN")
Environment=PORT=8000
ExecStart=$HOME/.deno/bin/deno run --allow-net --allow-env --allow-read --allow-write deno_pro.ts
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# 6. å¯åŠ¨æœåŠ¡
echo "ðŸš€ å¯åŠ¨æœåŠ¡..."
sudo systemctl daemon-reload
sudo systemctl enable sider2api
sudo systemctl start sider2api

echo ""
echo "âœ… éƒ¨ç½²å®Œæˆ!"
echo ""
echo "æœåŠ¡çŠ¶æ€: sudo systemctl status sider2api"
echo "æŸ¥çœ‹æ—¥å¿—: sudo journalctl -u sider2api -f"
echo "è®¿é—®åœ°å€: http://$(curl -s ifconfig.me):8000"
```

#### ä½¿ç”¨è„šæœ¬éƒ¨ç½²

```bash
# 1. åˆ›å»ºå¹¶è¿è¡Œè„šæœ¬
chmod +x deploy_sider2api.sh
./deploy_sider2api.sh

# 2. éªŒè¯æœåŠ¡
sudo systemctl status sider2api

# 3. æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u sider2api -f
```

#### æœåŠ¡ç®¡ç†å‘½ä»¤

```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start sider2api

# åœæ­¢æœåŠ¡
sudo systemctl stop sider2api

# é‡å¯æœåŠ¡
sudo systemctl restart sider2api

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status sider2api

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u sider2api -f

# å¼€æœºè‡ªå¯
sudo systemctl enable sider2api
```

---

## 4. Docker éƒ¨ç½² (æŽ¨èå®¹å™¨åŒ–)

### é€‚ç”¨åœºæ™¯
- å®¹å™¨åŒ–çŽ¯å¢ƒ
- å¾®æœåŠ¡æž¶æž„
- éœ€è¦å¿«é€Ÿè¿ç§»
- å¤šå®žä¾‹éƒ¨ç½²

### éƒ¨ç½²æ­¥éª¤

#### æ­¥éª¤ 1: åˆ›å»º Dockerfile

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `Dockerfile`:

```dockerfile
FROM denoland/deno:alpine

WORKDIR /app

# å¤åˆ¶ä»£ç 
COPY deno_pro.ts .
COPY custom_models.json .
COPY admin.html .

# æš´éœ²ç«¯å£
EXPOSE 8000

# å¯åŠ¨æœåŠ¡
CMD ["run", "--allow-net", "--allow-env", "--allow-read", "--allow-write", "deno_pro.ts"]
```

#### æ­¥éª¤ 2: æž„å»ºé•œåƒ

```bash
docker build -t sider2api:latest .
```

#### æ­¥éª¤ 3: è¿è¡Œå®¹å™¨

```bash
docker run -d \
  --name sider2api \
  -p 8000:8000 \
  -e SIDER_AUTH_TOKEN="ä½ çš„_Sider_Token" \
  -e AUTH_TOKEN="ä½ çš„_ç®¡ç†å¯†ç " \
  --restart unless-stopped \
  sider2api:latest
```

#### æ­¥éª¤ 4: ä½¿ç”¨ Docker Compose (æŽ¨è)

åˆ›å»º `docker-compose.yml`:

```yaml
version: '3.8'

services:
  sider2api:
    image: sider2api:latest
    build:
      context: .
      dockerfile: Dockerfile
    container_name: sider2api
    ports:
      - "8000:8000"
    environment:
      - SIDER_AUTH_TOKEN=${SIDER_AUTH_TOKEN}
      - AUTH_TOKEN=${AUTH_TOKEN}
    restart: unless-stopped
    volumes:
      - ./custom_models.json:/app/custom_models.json
```

åˆ›å»º `.env` æ–‡ä»¶:
```env
SIDER_AUTH_TOKEN=ä½ çš„_Sider_Token
AUTH_TOKEN=ä½ çš„_ç®¡ç†å¯†ç 
```

å¯åŠ¨æœåŠ¡:
```bash
docker-compose up -d
```

#### Docker ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs -f sider2api

# åœæ­¢æœåŠ¡
docker stop sider2api

# å¯åŠ¨æœåŠ¡
docker start sider2api

# é‡å¯æœåŠ¡
docker restart sider2api

# åˆ é™¤å®¹å™¨
docker rm -f sider2api

# ä½¿ç”¨ docker-compose
docker-compose up -d      # å¯åŠ¨
docker-compose down       # åœæ­¢
docker-compose logs -f    # æŸ¥çœ‹æ—¥å¿—
```

---

## 5. å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•èŽ·å– Sider Token?

**ç­”**:
1. å®‰è£… [Sider Chrome æ‰©å±•](https://sider.ai/)
2. F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
3. **åº”ç”¨ç¨‹åº** â†’ **å­˜å‚¨** â†’ **æ‰©å±•å­˜å‚¨** â†’ **Sider:ChatGPTä¾§è¾¹æ **
4. å¤åˆ¶ `token` å­—æ®µå€¼

### Q2: AUTH_TOKEN æ˜¯ä»€ä¹ˆ?

**ç­”**: ç®¡ç†ç•Œé¢çš„è®¤è¯å¯†ç ã€‚é…ç½®åŽ:
- è®¿é—® `/admin` éœ€è¦è¾“å…¥å¯†ç 
- æ‰€æœ‰ç®¡ç† API éœ€è¦ Bearer Token è®¤è¯
- å»ºè®®ç”Ÿäº§çŽ¯å¢ƒé…ç½®,å¼€å‘çŽ¯å¢ƒå¯é€‰

### Q3: å¦‚ä½•æµ‹è¯•æœåŠ¡æ˜¯å¦æ­£å¸¸?

**ç­”**: è¿è¡Œä»¥ä¸‹å‘½ä»¤:
```bash
# æµ‹è¯•æ¨¡åž‹åˆ—è¡¨
curl http://localhost:8000/v1/models

# æµ‹è¯•å¯¹è¯
curl http://localhost:8000/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{
    "model": "claude-4.5-sonnet",
    "messages": [{"role": "user", "content": "ä½ å¥½"}]
  }'
```

### Q4: ç«¯å£ 8000 è¢«å ç”¨æ€Žä¹ˆåŠž?

**ç­”**: é…ç½® `PORT` çŽ¯å¢ƒå˜é‡:
```bash
# Linux/macOS
export PORT=3000
deno run --allow-net --allow-env --allow-read --allow-write deno_pro.ts

# Windows CMD
set PORT=3000
deno run --allow-net --allow-env --allow-read --allow-write deno_pro.ts
```

### Q5: å¦‚ä½•é…ç½® HTTPS?

**ç­”**:
- **Deno Deploy**: è‡ªåŠ¨æä¾› HTTPS
- **æœ¬åœ°/VPS**: ä½¿ç”¨ Nginx åå‘ä»£ç†:

```nginx
server {
    listen 443 ssl http2;
    server_name your-domain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### Q6: æ”¯æŒå“ªäº›æ¨¡åž‹?

**ç­”**: æ”¯æŒ 29+ æ¨¡åž‹,åŒ…æ‹¬:
- GPT: gpt-4.1, gpt-4o, gpt-4.1-mini
- Claude: claude-4.5-sonnet, claude-4.1-opus, claude-haiku-4.5
- Gemini: gemini-2.5-pro, gemini-2.5-flash
- DeepSeek: deepseek-v3.1, deepseek-reasoner

å®Œæ•´åˆ—è¡¨è®¿é—®: http://localhost:8000/v1/models

### Q7: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰æ¨¡åž‹?

**ç­”**:
1. è®¿é—®ç®¡ç†ç•Œé¢: http://localhost:8000/admin
2. è¾“å…¥ç®¡ç†å¯†ç (å¦‚æžœé…ç½®äº† AUTH_TOKEN)
3. åœ¨ "æ·»åŠ è‡ªå®šä¹‰æ¨¡åž‹" åŒºåŸŸ:
   - **æ¨¡åž‹ ID**: è‡ªå®šä¹‰åç§°(å¦‚ my-gpt)
   - **Sider æ¨¡åž‹**: é€‰æ‹©åº•å±‚æ¨¡åž‹(å¦‚ gpt-4o)
   - **æè¿°**: æ¨¡åž‹è¯´æ˜Ž
4. ç‚¹å‡» "æ·»åŠ æ¨¡åž‹"

### Q8: å¦‚ä½•å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬?

**ç­”**:

**Git éƒ¨ç½²**:
```bash
cd sider2api
git pull origin main
# é‡å¯æœåŠ¡ (systemd)
sudo systemctl restart sider2api
# æˆ– Docker
docker-compose down && docker-compose up -d --build
```

**Deno Deploy**:
- æŽ¨é€åˆ° GitHub,è‡ªåŠ¨éƒ¨ç½²

**Playground**:
- å¤åˆ¶æœ€æ–°ä»£ç é‡æ–°éƒ¨ç½²

### Q9: æ€§èƒ½å¦‚ä½•ä¼˜åŒ–?

**ç­”**:
1. **ä½¿ç”¨ Deno Deploy**: å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹è‡ªåŠ¨ä¼˜åŒ–
2. **å¯ç”¨ HTTPS**: æå‡å®‰å…¨æ€§å’Œé€Ÿåº¦
3. **ä½¿ç”¨ CDN**: åŠ é€Ÿé™æ€èµ„æº
4. **é…ç½®ç¼“å­˜**: Nginx åå‘ä»£ç†ç¼“å­˜
5. **ç›‘æŽ§èµ„æº**: ä½¿ç”¨ `htop` ç›‘æŽ§ VPS èµ„æº

### Q10: æ—¥å¿—åœ¨å“ªé‡ŒæŸ¥çœ‹?

**ç­”**:

**æœ¬åœ°è¿è¡Œ**: ç›´æŽ¥åœ¨ç»ˆç«¯æŸ¥çœ‹è¾“å‡º

**systemd æœåŠ¡**:
```bash
sudo journalctl -u sider2api -f
```

**Docker**:
```bash
docker logs -f sider2api
```

**Deno Deploy**: åœ¨é¡¹ç›®çš„ Logs é¡µé¢æŸ¥çœ‹

---

## ðŸ”— ç›¸å…³æ–‡æ¡£

- **[å®Œæ•´åŠŸèƒ½æŒ‡å—](deno_proå®Œæ•´åŠŸèƒ½æŒ‡å—.md)** - æ‰€æœ‰åŠŸèƒ½è¯¦ç»†è¯´æ˜Ž
- **[Deno Deploy éƒ¨ç½²æŒ‡å—](Deno_Deployéƒ¨ç½²æŒ‡å—.md)** - æ·±åº¦éƒ¨ç½²æ•™ç¨‹
- **[ç®¡ç†ç•Œé¢è®¤è¯åŠŸèƒ½](ç®¡ç†ç•Œé¢è®¤è¯åŠŸèƒ½å®Œæˆæ€»ç»“.md)** - è®¤è¯åŠŸèƒ½è¯¦è§£
- **[README.md](../README.md)** - é¡¹ç›®æ¦‚è¿°

---

## ðŸ“ž èŽ·å–å¸®åŠ©

é‡åˆ°é—®é¢˜?

1. æŸ¥çœ‹ [å¸¸è§é—®é¢˜](#5-å¸¸è§é—®é¢˜)
2. æŸ¥çœ‹ [GitHub Issues](https://github.com/goldenhawksu/sider2api/issues)
3. æäº¤æ–°çš„ Issue æè¿°ä½ çš„é—®é¢˜

---

**ðŸŽ‰ äº«å—ä½¿ç”¨ Sider2API!**

*æœ€åŽæ›´æ–°: 2025-12-04*
